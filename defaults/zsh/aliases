# Set personal aliases, overriding those provided by oh-my-zsh libs,
# plugins, and themes. Aliases can be placed here, though oh-my-zsh
# users are encouraged to define aliases within the ZSH_CUSTOM folder.
# For a full list of active aliases, run `alias`.
alias vim="nvim"

alias ez="vim ~/.zshrc"
alias ev="vim ~/.config/nvim/"
alias et="vim ~/.tmux.conf.local"
alias ep="vim ~/.config/ohmyposh/config.toml"
alias ela="vim ~/.config/alacritty/alacritty.toml"
alias ew="vim ~/.config/wezterm/wezterm.lua"

alias py="python"
alias m="python manage.py"
alias dj="django-admin"
alias pa="artisan"
alias plz="php please"
alias pest="./vendor/bin/pest"
alias ci="composer install"
alias c="composer"
alias dump="composer dump-autoload"

alias rr="rustrover"
alias cr="cargo run"

unalias  gg 2> /dev/null
alias gg="lazygit"

# File system
alias ls='eza -lh --group-directories-first --icons'
alias lsa='ls -a'
alias lt='eza --tree --level=2 --long --icons --git'
alias lta='lt -a'
alias ff="fzf --preview 'batcat --style=numbers --color=always {}'"
alias fd='fdfind'

# Directories
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'

# Tools
alias n='nvim'
alias g='git'
alias d='docker'
alias r='rails'
alias bat='batcat'
alias lzg='lazygit'
alias lzd='lazydocker'

# Git
alias gcm='git commit -m'
alias gcam='git commit -a -m'
alias gcad='git commit -a --amend'

# Compression
compress() { tar -czf "${1%/}.tar.gz" "${1%/}"; }
alias decompress="tar -xzf"

# Convert webm files generated by the Gnome screenshot video recorder to mp4s that are more compatible
webm2mp4() {
  input_file="$1"
  output_file="${input_file%.webm}.mp4"
  ffmpeg -i "$input_file" -c:v libx264 -preset slow -crf 22 -c:a aac -b:a 192k "$output_file"
}

# Listening on PORT
listening() {
  if [ $# -eq 0 ]; then
    sudo lsof -iTCP -sTCP:LISTEN -n -P
  elif [ $# -eq 1 ]; then
    sudo lsof -iTCP -sTCP:LISTEN -n -P | grep -i --color $1
  else
    echo "Usage: listening [pattern]"
  fi
}

# Convert image to ico
img2ico () {
  local i="${1}" o="${2:-${1:r}.ico}" s="${png2ico_size:-256}"
  convert -resize x${s} -gravity center -crop ${s}x${s}+0+0 "$i" -flatten -colors 256 -background transparent "$o"
}

# get public IP
myip() {
  curl -s ipinfo.io | jq -r .ip
}

# Clear docker dangling images
dcleanup() {
  docker rm -v $(docker ps --filter status=exited -q 2>/dev/null) 2>/dev/null
  docker rmi $(docker images --filter dangling=true -q 2>/dev/null) 2>/dev/null
}

# just for fun
bipboop() {
  for i in {100..1000..100}; do ffplay -f lavfi -i "sine=frequency=${i}:duration=0.1" -autoexit -nodisp -loglevel quiet; done
}